<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head th:insert="/head.html :: head"></head>
<head>
<link rel="stylesheet" th:href="@{./css/style.css}">
</head>
<head>
<meta charset="UTF-8">
<title></title>
</head>
<body>
	<nav th:replace="fragments/navbar.html :: nav"></nav>
	<div class="container result">
	
		<h1>Resultat</h1>
		<h2 th:text="${scoreOfQuiz}"></h2>
		<p th:text="${totalScore}"></p>
		<div th:each="resp : ${listResponse}" 
			class="card" 
			th:classappend="${resp.isTrue} ? bg-success : bg-danger">
		  <div class="row">
		    <div class="col-md-4">
		      <img th:src="@{/images/media.jpg}" style="width:100%;" />
		    </div>
		    <div class="col-md-8">
		      <div class="card-body">
		        <h5 th:utext="'Question : ' + ${resp.question.content}" class="card-title"></h5>
		        <p th:utext="'Votre rÃ©ponse : ' + ${resp.content}" class="card-text"></p>
		        <p th:utext="'Titre de l\'article : ' + ${resp.question.article.title}" class="card-text"></p>
		        <a th:href="${resp.question.article.link}" target="_blank">Voir l'article</a>
		        <a th:onclick="'registerFav(' + ${resp.question.article.id} + ')'">
					<i th:id="'article-' + ${resp.question.article.id}" class="fa icon" aria-hidden="true"
						th:classappend="${#lists.contains(articles, resp.question.article)} ? 'fa-star' : 'fa-star-o'"></i>
				</a>
		      </div>
		    </div>
		  </div>
		</div>
	</div>
	

</body>
<script>
	function registerFav(articleId) {
		$.ajax('http://localhost:8080/favArticle/' + articleId).then((result) => {
			let i = $('#article-' + articleId);
			if (result) {
				i.addClass('fa-star');
				i.removeClass('fa-star-o');
			} else {
				i.removeClass('fa-star');
				i.addClass('fa-star-o');
			}
		});
	}
</script>
</html>